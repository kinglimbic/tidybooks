version: '3.8'

services:
  tidybooks:
    # 'build: .' tells Portainer to build the Dockerfile from this repo
    build: . 
    container_name: tidybooks
    ports:
      - "8501:8501"
    volumes:
      # 1. MEDIA FOLDERS (Safe Mode Mappings)
      # These must match the paths we set in app.py
      - /volume1/Zack/media:/volume1/Zack/media

      # 2. DATA PERSISTENCE
      # We map a physical folder on your NAS to save the database/logs.
      # If we don't do this, you lose your history every time you update the app.
      - /volume2/docker/tidybooks/:/app/data

    restart: unless-stopped
